let t=[],s=0;const f=4;let o=r=>{let u=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(l){return e.lc=u.push(l),()=>{for(let i=s+f;i<t.length;)t[i]===l?t.splice(i,f):i+=f;let n=u.indexOf(l);~n&&(u.splice(n,1),--e.lc)}},notify(l,n){let i=!t.length;for(let c of u)t.push(c,e.value,l,n);if(i){for(s=0;s<t.length;s+=f)t[s](t[s+1],t[s+2],t[s+3]);t.length=0}},off(){},set(l){let n=e.value;n!==l&&(e.value=l,e.notify(n))},subscribe(l){let n=e.listen(l);return l(e.value),n},value:r};return e};const a=o(!1),h=o(!1);export{a,h as c};
